{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "captions-state-control-demo",
  "registryDependencies": [
    "https://limeplay.winoffrg.dev/r/media-provider.json",
    "https://limeplay.winoffrg.dev/r/captions.json",
    "https://limeplay.winoffrg.dev/r/use-player.json"
  ],
  "files": [
    {
      "path": "registry/default/examples/captions-state-control-demo.tsx",
      "content": "\"use client\"\n\nimport { ClosedCaptioningIcon } from \"@phosphor-icons/react\"\nimport { useEffect } from \"react\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { MediaReadyState } from \"@/registry/default/hooks/use-player\"\nimport {\n  CaptionsContainer,\n  CaptionsControl,\n} from \"@/registry/default/ui/captions\"\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\"\n\nexport function CaptionsHybridDemo() {\n  return <CaptionsContainer className=\"mb-16\" />\n}\n\nexport function CaptionsStateControlDemo() {\n  const textTrackVisible = useMediaStore((state) => state.textTrackVisible)\n  const player = useMediaStore((state) => state.player)\n  const readyState = useMediaStore((state) => state.readyState)\n\n  // DEV: Adding text tracks externally as demo asset doesn't have built-in text tracks\n  useEffect(() => {\n    if (!player || readyState < MediaReadyState.HAVE_METADATA) return\n\n    player\n      .addTextTrackAsync(\n        \"/assets/sprite_fight.vtt\",\n        \"en\",\n        \"captions\",\n        \"text/vtt\",\n        undefined,\n        \"English\"\n      )\n      .then(() => {\n        player.selectTextTrack(player.getTextTracks()[0])\n        player.setTextTrackVisibility(true)\n        console.log(\"Text track added\")\n      })\n      .catch((error: unknown) => {\n        console.error(\"Error adding text track:\", error)\n      })\n  }, [readyState, player])\n\n  return (\n    <CaptionsControl asChild>\n      <Button size=\"icon\" variant=\"ghost\">\n        <ClosedCaptioningIcon\n          size={18}\n          weight={textTrackVisible ? \"fill\" : \"regular\"}\n        />\n      </Button>\n    </CaptionsControl>\n  )\n}\n",
      "type": "registry:example"
    }
  ],
  "type": "registry:example"
}