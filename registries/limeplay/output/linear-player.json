{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "linear-player",
  "author": "Rohan Gupta (@winoffrg)",
  "description": "Modern seamless flat linear.app Media Player",
  "dependencies": [
    "@phosphor-icons/react",
    "@base-ui-components/react",
    "@radix-ui/react-toggle",
    "zustand",
    "shaka-player",
    "lodash.clamp"
  ],
  "registryDependencies": [
    "dropdown-menu",
    "https://limeplay.winoffrg.dev/r/player-layout.json",
    "https://limeplay.winoffrg.dev/r/media.json",
    "https://limeplay.winoffrg.dev/r/media-provider.json",
    "https://limeplay.winoffrg.dev/r/mute-control.json",
    "https://limeplay.winoffrg.dev/r/player-hooks.json",
    "https://limeplay.winoffrg.dev/r/playback-control.json",
    "https://limeplay.winoffrg.dev/r/timeline-control.json",
    "https://limeplay.winoffrg.dev/r/volume-control.json",
    "https://limeplay.winoffrg.dev/r/use-timeline.json",
    "https://limeplay.winoffrg.dev/r/use-volume.json",
    "https://limeplay.winoffrg.dev/r/use-player.json",
    "https://limeplay.winoffrg.dev/r/use-track-events.json",
    "https://limeplay.winoffrg.dev/r/utils.json",
    "https://limeplay.winoffrg.dev/r/create-media-store.json",
    "https://limeplay.winoffrg.dev/r/fallback-poster.json",
    "https://limeplay.winoffrg.dev/r/timeline-labels.json",
    "https://limeplay.winoffrg.dev/r/use-shaka-player.json",
    "https://limeplay.winoffrg.dev/r/limeplay-logo.json",
    "https://limeplay.winoffrg.dev/r/root-container.json",
    "https://limeplay.winoffrg.dev/r/captions.json",
    "https://limeplay.winoffrg.dev/r/use-captions.json",
    "https://limeplay.winoffrg.dev/r/playback-rate.json",
    "https://limeplay.winoffrg.dev/r/use-playback-rate.json"
  ],
  "files": [
    {
      "path": "registry/default/blocks/linear-player/page.tsx",
      "content": "import { LinearMediaPlayer } from \"@/registry/default/blocks/linear-player/components/media-player\"\n\nexport default function Page() {\n  return (\n    <section className=\"flex h-dvh w-dvw bg-black\">\n      <LinearMediaPlayer src=\"https://stream.mux.com/VZtzUzGRv02OhRnZCxcNg49OilvolTqdnFLEqBsTwaxU.m3u8\" />\n    </section>\n  )\n}\n",
      "type": "registry:page",
      "target": "app/player/page.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/media-player.tsx",
      "content": "import React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { BottomControls } from \"@/registry/default/blocks/linear-player/components/bottom-controls\"\nimport { MediaElement } from \"@/registry/default/blocks/linear-player/components/media-element\"\nimport { PlayerHooks } from \"@/registry/default/blocks/linear-player/components/player-hooks\"\nimport { CaptionsContainer } from \"@/registry/default/ui/captions\"\nimport { FallbackPoster } from \"@/registry/default/ui/fallback-poster\"\nimport { LimeplayLogo } from \"@/registry/default/ui/limeplay-logo\"\nimport { MediaProvider } from \"@/registry/default/ui/media-provider\"\nimport * as Layout from \"@/registry/default/ui/player-layout\"\nimport { RootContainer } from \"@/registry/default/ui/root-container\"\n\nexport interface LinearMediaPlayerProps {\n  className?: string\n  debug?: boolean\n  src?: string\n}\n\nexport const LinearMediaPlayer = React.forwardRef<\n  HTMLDivElement,\n  LinearMediaPlayerProps\n>(({ className, debug = false }, ref) => {\n  return (\n    <MediaProvider debug={debug}>\n      <RootContainer\n        className={cn(\n          `\n            m-auto w-full\n            md:min-w-80\n          `,\n          className\n        )}\n        height={720}\n        ref={ref}\n        width={1280}\n      >\n        <Layout.PlayerContainer>\n          <FallbackPoster className=\"bg-black\">\n            <LimeplayLogo />\n          </FallbackPoster>\n          <MediaElement />\n          <PlayerHooks />\n          <Layout.ControlsOverlayContainer />\n          <Layout.ControlsContainer className=\"pb-6\">\n            <CaptionsContainer />\n            <BottomControls />\n          </Layout.ControlsContainer>\n        </Layout.PlayerContainer>\n      </RootContainer>\n    </MediaProvider>\n  )\n})\n\nLinearMediaPlayer.displayName = \"LinearMediaPlayer\"\n",
      "type": "registry:component",
      "target": "components/linear-player/components/media-player.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/volume-state-control.tsx",
      "content": "\"use client\"\n\nimport {\n  SpeakerHighIcon,\n  SpeakerLowIcon,\n  SpeakerXIcon,\n} from \"@phosphor-icons/react\"\n\nimport { Button } from \"@/registry/default/blocks/linear-player/ui/button\"\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\"\nimport { MuteControl } from \"@/registry/default/ui/mute-control\"\n\nexport function VolumeStateControl() {\n  const muted = useMediaStore((state) => state.muted)\n  const volume = useMediaStore((state) => state.volume)\n\n  return (\n    <MuteControl asChild>\n      <Button className=\"cursor-pointer\" size=\"icon\" variant=\"glass\">\n        {muted || volume === 0 ? (\n          <SpeakerXIcon weight=\"fill\" />\n        ) : volume < 0.5 ? (\n          <SpeakerLowIcon weight=\"fill\" />\n        ) : (\n          <SpeakerHighIcon weight=\"fill\" />\n        )}\n      </Button>\n    </MuteControl>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/volume-state-control.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/playback-state-control.tsx",
      "content": "\"use client\"\n\nimport {\n  CircleNotchIcon,\n  PauseIcon,\n  PlayIcon,\n  RepeatIcon,\n} from \"@phosphor-icons/react\"\n\nimport { Button } from \"@/registry/default/blocks/linear-player/ui/button\"\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\"\nimport { PlaybackControl } from \"@/registry/default/ui/playback-control\"\n\nexport function PlaybackStateControl() {\n  const status = useMediaStore((state) => state.status)\n\n  return (\n    <PlaybackControl asChild>\n      <Button className=\"cursor-pointer\" size=\"icon\" variant=\"glass\">\n        {status === \"playing\" ? (\n          <PauseIcon weight=\"fill\" />\n        ) : status === \"ended\" ? (\n          <RepeatIcon />\n        ) : status === \"buffering\" ? (\n          <CircleNotchIcon className=\"animate-spin\" weight=\"bold\" />\n        ) : (\n          <PlayIcon weight=\"fill\" />\n        )}\n      </Button>\n    </PlaybackControl>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/playback-state-control.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/volume-slider-control.tsx",
      "content": "import { cn } from \"@/lib/utils\"\nimport * as VolumeSlider from \"@/registry/default/ui/volume-control\"\n\nexport function VolumeSliderControl() {\n  return (\n    <VolumeSlider.Root\n      className={cn(\n        `\n          focus-area relative h-1 grow cursor-crosshair rounded-md opacity-0 transition-opacity duration-300 ease-in-out -focus-area-x-2\n          -focus-area-y-12\n          group-focus-within:opacity-100\n          group-hover:opacity-100\n        `\n      )}\n      orientation=\"horizontal\"\n    >\n      <VolumeSlider.Track>\n        <VolumeSlider.Progress />\n      </VolumeSlider.Track>\n      <VolumeSlider.Thumb />\n    </VolumeSlider.Root>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/volume-slider-control.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/timeline-slider-control.tsx",
      "content": "\"use client\"\n\nimport { useState } from \"react\"\n\nimport { Button } from \"@/registry/default/blocks/linear-player/ui/button\"\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\"\nimport * as TimelineSlider from \"@/registry/default/ui/timeline-control\"\nimport {\n  Duration,\n  Elapsed,\n  HoverTime,\n  LiveLatency,\n  Remaining,\n} from \"@/registry/default/ui/timeline-labels\"\n\nexport function TimelineSliderControl() {\n  const [showRemaining, setShowRemaining] = useState(false)\n  const liveLatency = useMediaStore((state) => state.liveLatency)\n  const isLive = useMediaStore((state) => state.isLive)\n  const player = useMediaStore((state) => state.player)\n\n  return (\n    <div className=\"my-auto flex grow items-center gap-3 select-none\">\n      {!isLive && <Elapsed className=\"text-xs font-medium\" />}\n      <div className=\"group/timeline relative w-full grow\">\n        <TimelineSlider.Root className=\"group focus-area cursor-crosshair -focus-area-x-2 -focus-area-y-14\">\n          <TimelineSlider.Track className=\"overflow-hidden\">\n            <TimelineSlider.Progress />\n            <TimelineSlider.Buffered variant=\"combined\" />\n          </TimelineSlider.Track>\n          <TimelineSlider.Thumb\n            className={`\n              absolute h-8 w-px rounded-full bg-primary/60 opacity-0 transition-opacity duration-(--lp-transition-speed-regular)\n              group-hover/timeline:opacity-100\n              group-active/timeline:bg-white\n            `}\n            showWithHover\n          />\n          <TimelineSlider.Thumb\n            className={`\n              top-auto! bottom-[calc(100%+16px)] flex h-auto w-fit bg-transparent text-xs font-medium opacity-0 transition-opacity\n              duration-(--lp-transition-speed-regular)\n              group-hover/timeline:opacity-100\n            `}\n            showWithHover\n          >\n            <HoverTime />\n            {!isLive && (\n              <>\n                &nbsp;/&nbsp;\n                <Duration className=\"text-primary/60\" />\n              </>\n            )}\n          </TimelineSlider.Thumb>\n        </TimelineSlider.Root>\n      </div>\n      {!isLive && (\n        <Button\n          aria-label={\n            showRemaining ? \"Show total duration\" : \"Show remaining time\"\n          }\n          aria-pressed={showRemaining}\n          className={`\n            h-6 w-14 cursor-pointer\n            hover:bg-transparent\n            focus-visible:bg-transparent\n          `}\n          onClick={() => {\n            setShowRemaining(!showRemaining)\n          }}\n          size=\"sm\"\n          variant=\"glass\"\n        >\n          {showRemaining ? (\n            <Remaining className=\"text-xs font-medium\" />\n          ) : (\n            <Duration className=\"text-xs font-medium\" />\n          )}\n        </Button>\n      )}\n      {liveLatency && player && liveLatency > 1 && (\n        <>\n          <LiveLatency className=\"text-xs font-medium\" />\n          <Button\n            aria-label=\"Go to live\"\n            className=\"h-6 w-fit cursor-pointer\"\n            onClick={() => void player.goToLive()}\n            size=\"icon\"\n            variant=\"glass\"\n          >\n            <span className=\"text-xs font-medium text-primary\">Go to live</span>\n          </Button>\n        </>\n      )}\n      {liveLatency && liveLatency <= 1 && (\n        <div className=\"flex items-center rounded-full bg-red-600 px-2 py-0.5 text-xs font-semibold tracking-wide\">\n          <div className=\"mr-1 h-2 w-2 animate-caret-blink rounded-full bg-foreground\" />\n          <span className=\"tracking-widest\">LIVE</span>\n        </div>\n      )}\n    </div>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/timeline-slider-control.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/bottom-controls.tsx",
      "content": "import { CaptionsStateControl } from \"@/registry/default/blocks/linear-player/components/captions-state-control\"\nimport { PlaybackRateControl } from \"@/registry/default/blocks/linear-player/components/playback-rate-control\"\nimport { PlaybackStateControl } from \"@/registry/default/blocks/linear-player/components/playback-state-control\"\nimport { Playlist } from \"@/registry/default/blocks/linear-player/components/playlist\"\nimport { TimelineSliderControl } from \"@/registry/default/blocks/linear-player/components/timeline-slider-control\"\nimport { VolumeGroupControl } from \"@/registry/default/blocks/linear-player/components/volume-group-control\"\nimport * as Layout from \"@/registry/default/ui/player-layout\"\n\nexport function BottomControls() {\n  return (\n    <Layout.ControlsBottomContainer>\n      <PlaybackStateControl />\n      <VolumeGroupControl />\n      <TimelineSliderControl />\n      <PlaybackRateControl />\n      <CaptionsStateControl />\n      <Playlist />\n    </Layout.ControlsBottomContainer>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/bottom-controls.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/media-element.tsx",
      "content": "\"use client\"\n\nimport type shaka from \"shaka-player\"\n\nimport { useEffect } from \"react\"\n\nimport { ASSETS } from \"@/registry/default/blocks/linear-player/lib/playlist\"\nimport { Media } from \"@/registry/default/ui/media\"\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\"\n\nexport function MediaElement({\n  config,\n  src,\n}: {\n  config?: shaka.extern.PlayerConfiguration\n  src?: string\n}) {\n  const player = useMediaStore((state) => state.player)\n  const mediaRef = useMediaStore((state) => state.mediaRef)\n\n  useEffect(() => {\n    const mediaElement = mediaRef.current\n\n    if (!src || !config) {\n      src = ASSETS[0].src\n      config = ASSETS[0].config\n    }\n\n    if (player && mediaElement) {\n      if (src) {\n        try {\n          const parsedUrl = new URL(src)\n\n          if (![\"http:\", \"https:\"].includes(parsedUrl.protocol)) {\n            throw new Error(\"Invalid URL protocol\")\n          }\n        } catch (error) {\n          console.error(\n            \"Invalid playback URL:\",\n            error instanceof Error ? error.message : \"Unknown error\"\n          )\n        }\n      }\n\n      if (config) {\n        player.configure(config)\n      }\n\n      if (src) {\n        void player\n          .load(src)\n          .then(() => {\n            console.debug(\"[limeplay] media loaded\")\n          })\n          .catch((error: unknown) => {\n            console.error(\"[limeplay] error loading media:\", error)\n          })\n      }\n    }\n  }, [player, mediaRef, src, config])\n\n  return (\n    <Media\n      as=\"video\"\n      autoPlay={false}\n      className=\"size-full object-cover\"\n      loop\n      muted\n    />\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/media-element.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/player-hooks.tsx",
      "content": "\"use client\"\n\nimport React from \"react\"\n\nimport { useCaptionsStates } from \"@/registry/default/hooks/use-captions\"\nimport { usePlaybackRateStates } from \"@/registry/default/hooks/use-playback-rate\"\nimport { usePlayerStates } from \"@/registry/default/hooks/use-player\"\nimport { useShakaPlayer } from \"@/registry/default/hooks/use-shaka-player\"\nimport { useTimelineStates } from \"@/registry/default/hooks/use-timeline\"\nimport { useVolumeStates } from \"@/registry/default/hooks/use-volume\"\n\nexport const PlayerHooks = React.memo(() => {\n  useShakaPlayer()\n  usePlayerStates()\n  useTimelineStates()\n  useVolumeStates()\n  useCaptionsStates()\n  usePlaybackRateStates()\n\n  return null\n})\n\nPlayerHooks.displayName = \"PlayerHooks\"\n",
      "type": "registry:component",
      "target": "components/linear-player/components/player-hooks.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/ui/button.tsx",
      "content": "import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  `\n    inline-flex shrink-0 cursor-pointer items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-colors\n    focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary/50\n    disabled:pointer-events-none disabled:opacity-50\n    [&_svg]:pointer-events-none [&_svg]:shrink-0\n    [&_svg:not([class*='size-'])]:size-4\n  `,\n  {\n    defaultVariants: {\n      size: \"default\",\n      variant: \"default\",\n    },\n    variants: {\n      size: {\n        default: `\n          h-9 px-4 py-2\n          has-[>svg]:px-3\n        `,\n        icon: \"size-8 rounded-md p-2\",\n        lg: `\n          h-10 rounded-md px-6\n          has-[>svg]:px-4\n        `,\n        sm: `\n          h-8 gap-1.5 rounded-md px-3\n          has-[>svg]:px-2.5\n        `,\n      },\n      variant: {\n        default: `\n          bg-primary text-primary-foreground\n          hover:bg-primary/90\n        `,\n        ghost: `hover:bg-accent hover:text-accent-foreground`,\n        glass: `\n          bg-transparent text-primary\n          hover:bg-primary/10\n          active:scale-[0.97]\n        `,\n        link: `\n          text-primary underline-offset-4\n          hover:underline\n        `,\n        outline: `\n          border border-input bg-background\n          hover:bg-accent hover:text-accent-foreground\n        `,\n        secondary: `\n          bg-secondary text-secondary-foreground\n          hover:bg-secondary/80\n        `,\n      },\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ asChild = false, className, size, variant, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ className, size, variant }))}\n        data-slot=\"button\"\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\n\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n",
      "type": "registry:ui",
      "target": "components/linear-player/ui/button.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/lib/create-media-store.ts",
      "content": "import { create } from \"zustand\"\n\nimport type { CaptionsStore } from \"@/registry/default/hooks/use-captions\"\nimport type { PlaybackRateStore } from \"@/registry/default/hooks/use-playback-rate\"\nimport type { PlayerStore } from \"@/registry/default/hooks/use-player\"\nimport type { TimelineStore } from \"@/registry/default/hooks/use-timeline\"\nimport type { VolumeStore } from \"@/registry/default/hooks/use-volume\"\n\nimport { createCaptionsStore } from \"@/registry/default/hooks/use-captions\"\nimport { createPlaybackRateStore } from \"@/registry/default/hooks/use-playback-rate\"\nimport { createPlayerStore } from \"@/registry/default/hooks/use-player\"\nimport { createTimelineStore } from \"@/registry/default/hooks/use-timeline\"\nimport { createVolumeStore } from \"@/registry/default/hooks/use-volume\"\n\nexport interface CreateMediaStoreProps {\n  debug?: boolean\n}\n\nexport type TypeMediaStore = CaptionsStore &\n  PlaybackRateStore &\n  PlayerStore &\n  TimelineStore &\n  VolumeStore\n\nexport function createMediaStore(initProps?: Partial<CreateMediaStoreProps>) {\n  const mediaStore = create<TypeMediaStore>()((...etc) => ({\n    ...createPlayerStore(...etc),\n    ...createVolumeStore(...etc),\n    ...createTimelineStore(...etc),\n    ...createCaptionsStore(...etc),\n    ...createPlaybackRateStore(...etc),\n\n    ...initProps,\n  }))\n  return mediaStore\n}\n",
      "type": "registry:lib",
      "target": "components/linear-player/lib/create-media-store.ts"
    },
    {
      "path": "registry/default/blocks/linear-player/components/playlist.tsx",
      "content": "\"use client\"\n\nimport type shaka from \"shaka-player\"\n\nimport { CardsThreeIcon, PlayIcon } from \"@phosphor-icons/react\"\nimport { useState } from \"react\"\n\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport { Button } from \"@/registry/default/blocks/linear-player/ui/button\"\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\"\n\nexport interface DemoAsset {\n  config?: shaka.extern.PlayerConfiguration\n  description?: string\n  poster: string\n  src: string\n  title: string\n}\n\nexport const ASSETS: DemoAsset[] = [\n  {\n    config: {\n      drm: {\n        advanced: {\n          \"com.widevine.alpha\": {\n            serverCertificateUri:\n              \"https://cwip-shaka-proxy.appspot.com/service-cert\",\n          },\n        },\n        servers: {\n          \"com.widevine.alpha\": \"https://cwip-shaka-proxy.appspot.com/no_auth\",\n        },\n      } as unknown as shaka.extern.DrmConfiguration,\n    } as shaka.extern.PlayerConfiguration,\n    description:\n      \"A Blender Foundation short film, protected by Widevine encryption\",\n    poster: \"https://storage.googleapis.com/shaka-asset-icons/sintel.png\",\n    src: \"https://storage.googleapis.com/shaka-demo-assets/sintel-widevine/dash.mpd\",\n    title: \"Blender Foundation - Sintel\",\n  },\n  {\n    description: \"Media Tailor HLS Stream\",\n    poster: \"https://storage.googleapis.com/shaka-asset-icons/sing.png\",\n    src: \"https://ad391cc0d55b44c6a86d232548adc225.mediatailor.us-east-1.amazonaws.com/v1/master/d02fedbbc5a68596164208dd24e9b48aa60dadc7/singssai/master.m3u8\",\n    title: \"Sing 2 Trailer\",\n  },\n  {\n    description: \"A Blender Foundation short film, Media Tailor Live DASH\",\n    poster:\n      \"https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png\",\n    src: \"https://d305rncpy6ne2q.cloudfront.net/v1/dash/94063eadf7d8c56e9e2edd84fdf897826a70d0df/SFP-MediaTailor-Live-HLS-DASH/channel/sfp-channel1/dash.mpd\",\n    title: \"Big Buck Bunny\",\n  },\n  {\n    description: \"HLS Video\",\n    poster: \"https://demo.theoplayer.com/hubfs/videos/natgeo/poster.jpg\",\n    src: \"https://demo.theoplayer.com/hubfs/videos/natgeo/playlist.m3u8\",\n    title: \"National Geographic - VR equirectangular\",\n  },\n]\n\nexport function Playlist() {\n  const [currentAsset, setCurrentAsset] = useState<DemoAsset | null>(null)\n  const [isOpen, setIsOpen] = useState(false)\n  const player = useMediaStore((state) => state.player)\n  const setForceIdle = useMediaStore((state) => state.setForceIdle)\n  const mediaRef = useMediaStore((state) => state.mediaRef)\n\n  const handleAssetSelect = async (asset: DemoAsset) => {\n    if (!player) {\n      console.error(\"Shaka Player not initialized\")\n      return\n    }\n\n    try {\n      if (asset.config) {\n        player.configure(asset.config)\n      }\n\n      await player.load(asset.src)\n      setCurrentAsset(asset)\n\n      if (mediaRef.current?.paused) {\n        await mediaRef.current.play()\n      }\n    } catch (error) {\n      console.error(\"Error loading asset:\", error)\n    }\n  }\n\n  const handleOpenChange = (open: boolean) => {\n    setIsOpen(open)\n    if (open) {\n      setForceIdle(true)\n    } else {\n      setForceIdle(false)\n    }\n  }\n\n  const handlePointerDown = (e: React.PointerEvent) => {\n    if (isOpen) {\n      e.stopPropagation()\n    }\n  }\n\n  return (\n    <DropdownMenu onOpenChange={handleOpenChange} open={isOpen}>\n      <DropdownMenuTrigger asChild>\n        <Button aria-label=\"Open episodes\" size=\"icon\" variant=\"glass\">\n          <CardsThreeIcon weight=\"fill\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        align=\"end\"\n        alignOffset={-12}\n        className=\"w-sm p-2\"\n        onPointerDown={handlePointerDown}\n        side=\"top\"\n        sideOffset={24}\n      >\n        <DropdownMenuLabel>\n          Episodes\n          <p className=\"mt-1 text-xs text-muted-foreground\">\n            This is a draft version of Playlist component\n          </p>\n        </DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        <div className=\"space-y-2\">\n          {ASSETS.map((asset, index) => {\n            const isCurrentAsset = currentAsset?.src === asset.src\n            return (\n              <DropdownMenuItem\n                className={`\n                  p-0 transition-colors\n                  ${\n                    isCurrentAsset\n                      ? \"border-primary/20 bg-primary/10\"\n                      : \"hover:bg-accent/50\"\n                  }\n                `}\n                key={index}\n                onSelect={() => handleAssetSelect(asset)}\n              >\n                <div className=\"flex w-full items-center gap-3 p-2\">\n                  <div className=\"relative aspect-video w-20 shrink-0 overflow-hidden rounded\">\n                    <img\n                      alt={asset.title}\n                      className=\"object-cover\"\n                      // fill\n                      sizes=\"80px\"\n                      src={asset.poster}\n                      // priority={index < 2}\n                    />\n                    {isCurrentAsset && (\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-black/40\">\n                        <PlayIcon className=\"size-6 text-white\" weight=\"fill\" />\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"min-w-0 flex-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"truncate text-sm font-medium\">\n                        {asset.title}\n                      </div>\n                      {isCurrentAsset && (\n                        <div className=\"flex size-2 rounded-full bg-primary\" />\n                      )}\n                    </div>\n                    {asset.description && (\n                      <div className=\"line-clamp-2 text-xs text-muted-foreground\">\n                        {asset.description}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </DropdownMenuItem>\n            )\n          })}\n        </div>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/playlist.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/lib/playlist.ts",
      "content": "import type shaka from \"shaka-player\"\n\nexport interface DemoAsset {\n  config?: shaka.extern.PlayerConfiguration\n  description?: string\n  poster: string\n  src: string\n  title: string\n}\n\nexport const ASSETS: DemoAsset[] = [\n  {\n    config: {\n      drm: {\n        advanced: {\n          \"com.widevine.alpha\": {\n            serverCertificateUri:\n              \"https://cwip-shaka-proxy.appspot.com/service-cert\",\n          },\n        },\n        servers: {\n          \"com.widevine.alpha\": \"https://cwip-shaka-proxy.appspot.com/no_auth\",\n        },\n      } as unknown as shaka.extern.DrmConfiguration,\n    } as shaka.extern.PlayerConfiguration,\n    description:\n      \"A Blender Foundation short film, protected by Widevine encryption\",\n    poster: \"https://storage.googleapis.com/shaka-asset-icons/sintel.png\",\n    src: \"https://storage.googleapis.com/shaka-demo-assets/sintel-widevine/dash.mpd\",\n    title: \"Blender Foundation - Sintel\",\n  },\n  {\n    description: \"Media Tailor HLS Stream\",\n    poster: \"https://storage.googleapis.com/shaka-asset-icons/sing.png\",\n    src: \"https://ad391cc0d55b44c6a86d232548adc225.mediatailor.us-east-1.amazonaws.com/v1/master/d02fedbbc5a68596164208dd24e9b48aa60dadc7/singssai/master.m3u8\",\n    title: \"Sing 2 Trailer\",\n  },\n  {\n    description: \"A Blender Foundation short film, Media Tailor Live DASH\",\n    poster:\n      \"https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png\",\n    src: \"https://d305rncpy6ne2q.cloudfront.net/v1/dash/94063eadf7d8c56e9e2edd84fdf897826a70d0df/SFP-MediaTailor-Live-HLS-DASH/channel/sfp-channel1/dash.mpd\",\n    title: \"Big Buck Bunny\",\n  },\n  {\n    description: \"HLS Video\",\n    poster: \"https://demo.theoplayer.com/hubfs/videos/natgeo/poster.jpg\",\n    src: \"https://demo.theoplayer.com/hubfs/videos/natgeo/playlist.m3u8\",\n    title: \"National Geographic - VR equirectangular\",\n  },\n]\n",
      "type": "registry:lib",
      "target": "components/linear-player/lib/playlist.ts"
    },
    {
      "path": "registry/default/blocks/linear-player/components/captions-state-control.tsx",
      "content": "\"use client\"\n\nimport { ClosedCaptioningIcon } from \"@phosphor-icons/react\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { CaptionsControl } from \"@/registry/default/ui/captions\"\nimport { useMediaStore } from \"@/registry/default/ui/media-provider\"\n\nexport function CaptionsStateControl() {\n  const textTrackVisible = useMediaStore((state) => state.textTrackVisible)\n\n  return (\n    <CaptionsControl asChild>\n      <Button className=\"cursor-pointer\" size=\"icon\" variant=\"glass\">\n        <ClosedCaptioningIcon weight={textTrackVisible ? \"fill\" : \"regular\"} />\n      </Button>\n    </CaptionsControl>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/captions-state-control.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/playback-rate-control.tsx",
      "content": "\"use client\"\n\nimport { Button } from \"@/components/ui/button\"\nimport * as Select from \"@/components/ui/select\"\nimport * as PlaybackRate from \"@/registry/default/ui/playback-rate\"\n\nexport function PlaybackRateControl() {\n  return (\n    <PlaybackRate.SelectRoot>\n      <Button asChild size=\"icon\" variant=\"ghost\">\n        <PlaybackRate.SelectTrigger\n          className={`\n            border-none bg-transparent px-8 shadow-none\n            hover:bg-foreground/10\n            dark:bg-transparent dark:shadow-none\n          `}\n          size=\"sm\"\n        />\n      </Button>\n      <Select.SelectPositioner align=\"start\" className=\"z-100\">\n        <Select.SelectContent\n          className={`\n            min-w-24 backdrop-blur-md\n            dark:bg-accent\n          `}\n        >\n          <PlaybackRate.SelectGroup className={`tracking-wider`} />\n        </Select.SelectContent>\n      </Select.SelectPositioner>\n    </PlaybackRate.SelectRoot>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/playback-rate-control.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/ui/toggle.tsx",
      "content": "\"use client\"\n\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  `\n    inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-[color,box-shadow]\n    hover:bg-muted\n    focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-foreground/50\n    disabled:pointer-events-none disabled:opacity-50\n    aria-invalid:border-destructive aria-invalid:ring-destructive/20\n    data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\n    dark:aria-invalid:ring-destructive/40\n    [&_svg]:pointer-events-none [&_svg]:shrink-0\n    [&_svg:not([class*='size-'])]:size-4\n  `,\n  {\n    defaultVariants: {\n      size: \"default\",\n      variant: \"default\",\n    },\n    variants: {\n      size: {\n        default: \"h-9 min-w-9 px-2\",\n        lg: \"h-10 min-w-10 px-2.5\",\n        sm: \"h-8 min-w-8 px-1.5\",\n      },\n      variant: {\n        default: \"bg-transparent\",\n        glass: `\n          bg-transparent text-primary\n          hover:bg-primary/10\n          active:scale-[0.97]\n          data-[state=on]:bg-transparent data-[state=on]:hover:bg-primary/10\n        `,\n        outline: `\n          border border-input bg-transparent shadow-xs\n          hover:bg-accent hover:text-accent-foreground\n        `,\n      },\n    },\n  }\n)\n\nfunction Toggle({\n  className,\n  size,\n  variant,\n  ...props\n}: React.ComponentProps<typeof TogglePrimitive.Root> &\n  VariantProps<typeof toggleVariants>) {\n  return (\n    <TogglePrimitive.Root\n      className={cn(toggleVariants({ className, size, variant }))}\n      data-slot=\"toggle\"\n      {...props}\n    />\n  )\n}\n\nexport { Toggle, toggleVariants }\n",
      "type": "registry:ui",
      "target": "components/ui/toggle.tsx"
    },
    {
      "path": "registry/default/blocks/linear-player/components/volume-group-control.tsx",
      "content": "import { VolumeSliderControl } from \"@/registry/default/blocks/linear-player/components/volume-slider-control\"\nimport { VolumeStateControl } from \"@/registry/default/blocks/linear-player/components/volume-state-control\"\n\nexport function VolumeGroupControl() {\n  return (\n    <div\n      className={`\n        group me-2 flex min-w-24 items-center gap-1.5 rounded-md pe-3 transition-all duration-300 ease-in-out\n        hover:bg-primary/10\n        focus-visible:bg-primary/10 focus-visible:ring-primary/50\n      `}\n    >\n      <VolumeStateControl />\n      <VolumeSliderControl />\n    </div>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/linear-player/components/volume-group-control.tsx"
    }
  ],
  "meta": {
    "iframeHeight": "750px",
    "props": {
      "src": "https://ad391cc0d55b44c6a86d232548adc225.mediatailor.us-east-1.amazonaws.com/v1/master/d02fedbbc5a68596164208dd24e9b48aa60dadc7/singssai/master.m3u8"
    }
  },
  "type": "registry:block"
}