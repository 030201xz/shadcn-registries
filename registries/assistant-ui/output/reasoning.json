{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "reasoning",
  "type": "registry:component",
  "files": [
    {
      "content": "\"use client\";\n\nimport { BrainIcon, ChevronDownIcon } from \"lucide-react\";\nimport {\n  memo,\n  useCallback,\n  useRef,\n  useState,\n  type FC,\n  type PropsWithChildren,\n} from \"react\";\n\nimport {\n  useScrollLock,\n  useAssistantState,\n  type ReasoningMessagePartComponent,\n  type ReasoningGroupComponent,\n} from \"@assistant-ui/react\";\n\nimport { MarkdownText } from \"@/components/assistant-ui/markdown-text\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { cn } from \"@/lib/utils\";\n\nconst ANIMATION_DURATION = 200;\n\n/**\n * Root collapsible container that manages open/closed state and scroll lock.\n * Provides animation timing via CSS variable and prevents scroll jumps on collapse.\n */\nconst ReasoningRoot: FC<\n  PropsWithChildren<{\n    className?: string;\n  }>\n> = ({ className, children }) => {\n  const collapsibleRef = useRef<HTMLDivElement>(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const lockScroll = useScrollLock(collapsibleRef, ANIMATION_DURATION);\n\n  const handleOpenChange = useCallback(\n    (open: boolean) => {\n      if (!open) {\n        lockScroll();\n      }\n      setIsOpen(open);\n    },\n    [lockScroll],\n  );\n\n  return (\n    <Collapsible\n      ref={collapsibleRef}\n      open={isOpen}\n      onOpenChange={handleOpenChange}\n      className={cn(\"aui-reasoning-root mb-4 w-full\", className)}\n      style={\n        {\n          \"--animation-duration\": `${ANIMATION_DURATION}ms`,\n        } as React.CSSProperties\n      }\n    >\n      {children}\n    </Collapsible>\n  );\n};\n\nReasoningRoot.displayName = \"ReasoningRoot\";\n\n/**\n * Gradient overlay that softens the bottom edge during expand/collapse animations.\n * Animation: Fades out with delay when opening and fades back in when closing.\n */\nconst GradientFade: FC<{ className?: string }> = ({ className }) => (\n  <div\n    className={cn(\n      \"aui-reasoning-fade pointer-events-none absolute inset-x-0 bottom-0 z-10 h-16\",\n      \"bg-[linear-gradient(to_top,var(--color-background),transparent)]\",\n      \"fade-in-0 animate-in\",\n      \"group-data-[state=open]/collapsible-content:animate-out\",\n      \"group-data-[state=open]/collapsible-content:fade-out-0\",\n      \"group-data-[state=open]/collapsible-content:delay-[calc(var(--animation-duration)*0.75)]\", // calc for timing the delay\n      \"group-data-[state=open]/collapsible-content:fill-mode-forwards\",\n      \"duration-(--animation-duration)\",\n      \"group-data-[state=open]/collapsible-content:duration-(--animation-duration)\",\n      className,\n    )}\n  />\n);\n\n/**\n * Trigger button for the Reasoning collapsible.\n * Composed of icons, label, and text shimmer animation when reasoning is being streamed.\n */\nconst ReasoningTrigger: FC<{ active: boolean; className?: string }> = ({\n  active,\n  className,\n}) => (\n  <CollapsibleTrigger\n    className={cn(\n      \"aui-reasoning-trigger group/trigger -mb-2 flex max-w-[75%] items-center gap-2 py-2 text-muted-foreground text-sm transition-colors hover:text-foreground\",\n      className,\n    )}\n  >\n    <BrainIcon className=\"aui-reasoning-trigger-icon size-4 shrink-0\" />\n    <span className=\"aui-reasoning-trigger-label-wrapper relative inline-block leading-none\">\n      <span>Reasoning</span>\n      {active ? (\n        <span\n          aria-hidden\n          className=\"aui-reasoning-trigger-shimmer shimmer pointer-events-none absolute inset-0 motion-reduce:animate-none\"\n        >\n          Reasoning\n        </span>\n      ) : null}\n    </span>\n    <ChevronDownIcon\n      className={cn(\n        \"aui-reasoning-trigger-chevron mt-0.5 size-4 shrink-0\",\n        \"transition-transform duration-(--animation-duration) ease-out\",\n        \"group-data-[state=closed]/trigger:-rotate-90\",\n        \"group-data-[state=open]/trigger:rotate-0\",\n      )}\n    />\n  </CollapsibleTrigger>\n);\n\n/**\n * Collapsible content wrapper that handles height expand/collapse animation.\n * Animation: Height animates up (collapse) and down (expand).\n * Also provides group context for child animations via data-state attributes.\n */\nconst ReasoningContent: FC<\n  PropsWithChildren<{\n    className?: string;\n    \"aria-busy\"?: boolean;\n  }>\n> = ({ className, children, \"aria-busy\": ariaBusy }) => (\n  <CollapsibleContent\n    className={cn(\n      \"aui-reasoning-content relative overflow-hidden text-muted-foreground text-sm outline-none\",\n      \"group/collapsible-content ease-out\",\n      \"data-[state=closed]:animate-collapsible-up\",\n      \"data-[state=open]:animate-collapsible-down\",\n      \"data-[state=closed]:fill-mode-forwards\",\n      \"data-[state=closed]:pointer-events-none\",\n      \"data-[state=open]:duration-(--animation-duration)\",\n      \"data-[state=closed]:duration-(--animation-duration)\",\n      className,\n    )}\n    aria-busy={ariaBusy}\n  >\n    {children}\n    <GradientFade />\n  </CollapsibleContent>\n);\n\nReasoningContent.displayName = \"ReasoningContent\";\n\n/**\n * Text content wrapper that animates the reasoning text visibility.\n * Animation: Slides in from top + fades in when opening, reverses when closing.\n * Reacts to parent ReasoningContent's data-state via Radix group selectors.\n */\nconst ReasoningText: FC<\n  PropsWithChildren<{\n    className?: string;\n  }>\n> = ({ className, children }) => (\n  <div\n    className={cn(\n      \"aui-reasoning-text relative z-0 space-y-4 pt-4 pl-6 leading-relaxed\",\n      \"transform-gpu transition-[transform,opacity]\",\n      \"group-data-[state=open]/collapsible-content:animate-in\",\n      \"group-data-[state=closed]/collapsible-content:animate-out\",\n      \"group-data-[state=open]/collapsible-content:fade-in-0\",\n      \"group-data-[state=closed]/collapsible-content:fade-out-0\",\n      \"group-data-[state=open]/collapsible-content:slide-in-from-top-4\",\n      \"group-data-[state=closed]/collapsible-content:slide-out-to-top-4\",\n      \"group-data-[state=open]/collapsible-content:duration-(--animation-duration)\",\n      \"group-data-[state=closed]/collapsible-content:duration-(--animation-duration)\",\n      \"[&_p]:-mb-2\",\n      className,\n    )}\n  >\n    {children}\n  </div>\n);\n\nReasoningText.displayName = \"ReasoningText\";\n\n/**\n * Renders a single reasoning part's text with markdown support.\n * Consecutive reasoning parts are automatically grouped by ReasoningGroup.\n *\n * Pass Reasoning to MessagePrimitive.Parts in thread.tsx\n *\n * @example:\n * ```tsx\n * <MessagePrimitive.Parts\n *   components={{\n *     Reasoning: Reasoning,\n *     ReasoningGroup: ReasoningGroup,\n *   }}\n * />\n * ```\n */\nconst ReasoningImpl: ReasoningMessagePartComponent = () => <MarkdownText />;\n\n/**\n * Collapsible wrapper that groups consecutive reasoning parts together.\n *  Includes scroll lock to prevent page jumps during collapse animation.\n *\n *  Pass ReasoningGroup to MessagePrimitive.Parts in thread.tsx\n *\n * @example:\n * ```tsx\n * <MessagePrimitive.Parts\n *   components={{\n *     Reasoning: Reasoning,\n *     ReasoningGroup: ReasoningGroup,\n *   }}\n * />\n * ```\n */\nconst ReasoningGroupImpl: ReasoningGroupComponent = ({\n  children,\n  startIndex,\n  endIndex,\n}) => {\n  /**\n   * Detects if reasoning is currently streaming within this group's range.\n   */\n  const isReasoningStreaming = useAssistantState(({ message }) => {\n    if (message.status?.type !== \"running\") return false;\n    const lastIndex = message.parts.length - 1;\n    if (lastIndex < 0) return false;\n    const lastType = message.parts[lastIndex]?.type;\n    if (lastType !== \"reasoning\") return false;\n    return lastIndex >= startIndex && lastIndex <= endIndex;\n  });\n\n  return (\n    <ReasoningRoot>\n      <ReasoningTrigger active={isReasoningStreaming} />\n\n      <ReasoningContent aria-busy={isReasoningStreaming}>\n        <ReasoningText>{children}</ReasoningText>\n      </ReasoningContent>\n    </ReasoningRoot>\n  );\n};\n\nexport const Reasoning = memo(ReasoningImpl);\nReasoning.displayName = \"Reasoning\";\n\nexport const ReasoningGroup = memo(ReasoningGroupImpl);\nReasoningGroup.displayName = \"ReasoningGroup\";\n",
      "type": "registry:component",
      "path": "components/assistant-ui/reasoning.tsx"
    }
  ],
  "registryDependencies": [
    "collapsible",
    "https://r.assistant-ui.com/markdown-text.json"
  ],
  "dependencies": [
    "@assistant-ui/react",
    "lucide-react",
    "tw-shimmer"
  ],
  "css": {
    "@import": "tw-shimmer"
  }
}