{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "reasoning",
  "type": "registry:component",
  "files": [
    {
      "content": "\"use client\";\n\nimport { memo, useCallback, useRef, useState } from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { BrainIcon, ChevronDownIcon } from \"lucide-react\";\nimport {\n  useScrollLock,\n  useAuiState,\n  type ReasoningMessagePartComponent,\n  type ReasoningGroupComponent,\n} from \"@assistant-ui/react\";\nimport { MarkdownText } from \"@/components/assistant-ui/markdown-text\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { cn } from \"@/lib/utils\";\n\nconst ANIMATION_DURATION = 200;\n\nconst reasoningVariants = cva(\"aui-reasoning-root mb-4 w-full\", {\n  variants: {\n    variant: {\n      default: \"\",\n      outline: \"rounded-lg border px-3 py-2\",\n      muted: \"rounded-lg bg-muted/50 px-3 py-2\",\n    },\n  },\n  defaultVariants: {\n    variant: \"default\",\n  },\n});\n\nexport type ReasoningRootProps = Omit<\n  React.ComponentProps<typeof Collapsible>,\n  \"open\" | \"onOpenChange\"\n> &\n  VariantProps<typeof reasoningVariants> & {\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n    defaultOpen?: boolean;\n  };\n\nfunction ReasoningRoot({\n  className,\n  variant,\n  open: controlledOpen,\n  onOpenChange: controlledOnOpenChange,\n  defaultOpen = false,\n  children,\n  ...props\n}: ReasoningRootProps) {\n  const collapsibleRef = useRef<HTMLDivElement>(null);\n  const [uncontrolledOpen, setUncontrolledOpen] = useState(defaultOpen);\n  const lockScroll = useScrollLock(collapsibleRef, ANIMATION_DURATION);\n\n  const isControlled = controlledOpen !== undefined;\n  const isOpen = isControlled ? controlledOpen : uncontrolledOpen;\n\n  const handleOpenChange = useCallback(\n    (open: boolean) => {\n      if (!open) {\n        lockScroll();\n      }\n      if (!isControlled) {\n        setUncontrolledOpen(open);\n      }\n      controlledOnOpenChange?.(open);\n    },\n    [lockScroll, isControlled, controlledOnOpenChange],\n  );\n\n  return (\n    <Collapsible\n      ref={collapsibleRef}\n      data-slot=\"reasoning-root\"\n      data-variant={variant}\n      open={isOpen}\n      onOpenChange={handleOpenChange}\n      className={cn(\n        \"group/reasoning-root\",\n        reasoningVariants({ variant, className }),\n      )}\n      style={\n        {\n          \"--animation-duration\": `${ANIMATION_DURATION}ms`,\n        } as React.CSSProperties\n      }\n      {...props}\n    >\n      {children}\n    </Collapsible>\n  );\n}\n\nfunction ReasoningFade({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"reasoning-fade\"\n      className={cn(\n        \"aui-reasoning-fade pointer-events-none absolute inset-x-0 bottom-0 z-10 h-8\",\n        \"bg-[linear-gradient(to_top,var(--color-background),transparent)]\",\n        \"group-data-[variant=muted]/reasoning-root:bg-[linear-gradient(to_top,hsl(var(--muted)/0.5),transparent)]\",\n        \"fade-in-0 animate-in\",\n        \"group-data-[state=open]/collapsible-content:animate-out\",\n        \"group-data-[state=open]/collapsible-content:fade-out-0\",\n        \"group-data-[state=open]/collapsible-content:delay-[calc(var(--animation-duration)*0.75)]\",\n        \"group-data-[state=open]/collapsible-content:fill-mode-forwards\",\n        \"duration-(--animation-duration)\",\n        \"group-data-[state=open]/collapsible-content:duration-(--animation-duration)\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction ReasoningTrigger({\n  active,\n  duration,\n  className,\n  ...props\n}: React.ComponentProps<typeof CollapsibleTrigger> & {\n  active?: boolean;\n  duration?: number;\n}) {\n  const durationText = duration ? ` (${duration}s)` : \"\";\n\n  return (\n    <CollapsibleTrigger\n      data-slot=\"reasoning-trigger\"\n      className={cn(\n        \"aui-reasoning-trigger group/trigger flex max-w-[75%] items-center gap-2 py-1 text-muted-foreground text-sm transition-colors hover:text-foreground\",\n        className,\n      )}\n      {...props}\n    >\n      <BrainIcon\n        data-slot=\"reasoning-trigger-icon\"\n        className=\"aui-reasoning-trigger-icon size-4 shrink-0\"\n      />\n      <span\n        data-slot=\"reasoning-trigger-label\"\n        className=\"aui-reasoning-trigger-label-wrapper relative inline-block leading-none\"\n      >\n        <span>Reasoning{durationText}</span>\n        {active ? (\n          <span\n            aria-hidden\n            data-slot=\"reasoning-trigger-shimmer\"\n            className=\"aui-reasoning-trigger-shimmer shimmer pointer-events-none absolute inset-0 motion-reduce:animate-none\"\n          >\n            Reasoning{durationText}\n          </span>\n        ) : null}\n      </span>\n      <ChevronDownIcon\n        data-slot=\"reasoning-trigger-chevron\"\n        className={cn(\n          \"aui-reasoning-trigger-chevron mt-0.5 size-4 shrink-0\",\n          \"transition-transform duration-(--animation-duration) ease-out\",\n          \"group-data-[state=closed]/trigger:-rotate-90\",\n          \"group-data-[state=open]/trigger:rotate-0\",\n        )}\n      />\n    </CollapsibleTrigger>\n  );\n}\n\nfunction ReasoningContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof CollapsibleContent>) {\n  return (\n    <CollapsibleContent\n      data-slot=\"reasoning-content\"\n      className={cn(\n        \"aui-reasoning-content relative overflow-hidden text-muted-foreground text-sm outline-none\",\n        \"group/collapsible-content ease-out\",\n        \"data-[state=closed]:animate-collapsible-up\",\n        \"data-[state=open]:animate-collapsible-down\",\n        \"data-[state=closed]:fill-mode-forwards\",\n        \"data-[state=closed]:pointer-events-none\",\n        \"data-[state=open]:duration-(--animation-duration)\",\n        \"data-[state=closed]:duration-(--animation-duration)\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ReasoningFade />\n    </CollapsibleContent>\n  );\n}\n\nfunction ReasoningText({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"reasoning-text\"\n      className={cn(\n        \"aui-reasoning-text relative z-0 max-h-64 overflow-y-auto pt-2 pb-2 pl-6 leading-relaxed\",\n        \"transform-gpu transition-[transform,opacity]\",\n        \"group-data-[state=open]/collapsible-content:animate-in\",\n        \"group-data-[state=closed]/collapsible-content:animate-out\",\n        \"group-data-[state=open]/collapsible-content:fade-in-0\",\n        \"group-data-[state=closed]/collapsible-content:fade-out-0\",\n        \"group-data-[state=open]/collapsible-content:slide-in-from-top-4\",\n        \"group-data-[state=closed]/collapsible-content:slide-out-to-top-4\",\n        \"group-data-[state=open]/collapsible-content:duration-(--animation-duration)\",\n        \"group-data-[state=closed]/collapsible-content:duration-(--animation-duration)\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nconst ReasoningImpl: ReasoningMessagePartComponent = () => <MarkdownText />;\n\nconst ReasoningGroupImpl: ReasoningGroupComponent = ({\n  children,\n  startIndex,\n  endIndex,\n}) => {\n  const isReasoningStreaming = useAuiState(({ message }) => {\n    if (message.status?.type !== \"running\") return false;\n    const lastIndex = message.parts.length - 1;\n    if (lastIndex < 0) return false;\n    const lastType = message.parts[lastIndex]?.type;\n    if (lastType !== \"reasoning\") return false;\n    return lastIndex >= startIndex && lastIndex <= endIndex;\n  });\n\n  return (\n    <ReasoningRoot defaultOpen={isReasoningStreaming}>\n      <ReasoningTrigger active={isReasoningStreaming} />\n      <ReasoningContent aria-busy={isReasoningStreaming}>\n        <ReasoningText>{children}</ReasoningText>\n      </ReasoningContent>\n    </ReasoningRoot>\n  );\n};\n\nconst Reasoning = memo(\n  ReasoningImpl,\n) as unknown as ReasoningMessagePartComponent & {\n  Root: typeof ReasoningRoot;\n  Trigger: typeof ReasoningTrigger;\n  Content: typeof ReasoningContent;\n  Text: typeof ReasoningText;\n  Fade: typeof ReasoningFade;\n};\n\nReasoning.displayName = \"Reasoning\";\nReasoning.Root = ReasoningRoot;\nReasoning.Trigger = ReasoningTrigger;\nReasoning.Content = ReasoningContent;\nReasoning.Text = ReasoningText;\nReasoning.Fade = ReasoningFade;\n\nconst ReasoningGroup = memo(ReasoningGroupImpl);\nReasoningGroup.displayName = \"ReasoningGroup\";\n\nexport {\n  Reasoning,\n  ReasoningGroup,\n  ReasoningRoot,\n  ReasoningTrigger,\n  ReasoningContent,\n  ReasoningText,\n  ReasoningFade,\n  reasoningVariants,\n};\n",
      "type": "registry:component",
      "path": "components/assistant-ui/reasoning.tsx"
    }
  ],
  "registryDependencies": [
    "collapsible",
    "https://r.assistant-ui.com/markdown-text.json"
  ],
  "dependencies": [
    "@assistant-ui/react",
    "lucide-react",
    "class-variance-authority",
    "tw-shimmer"
  ],
  "css": {
    "@import \"tw-shimmer\"": {}
  }
}