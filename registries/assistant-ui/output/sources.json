{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sources",
  "type": "registry:component",
  "files": [
    {
      "content": "\"use client\";\n\nimport { memo, useState, type ComponentProps } from \"react\";\nimport type { SourceMessagePartComponent } from \"@assistant-ui/react\";\nimport { cn } from \"@/lib/utils\";\nimport { Badge, badgeVariants, type BadgeProps } from \"./badge\";\n\nconst extractDomain = (url: string): string => {\n  try {\n    return new URL(url).hostname.replace(/^www\\./, \"\");\n  } catch {\n    return url;\n  }\n};\n\nconst getDomainInitial = (url: string): string => {\n  const domain = extractDomain(url);\n  return domain.charAt(0).toUpperCase();\n};\n\nfunction SourceIcon({\n  url,\n  className,\n  ...props\n}: ComponentProps<\"span\"> & { url: string }) {\n  const [hasError, setHasError] = useState(false);\n  const domain = extractDomain(url);\n\n  if (hasError) {\n    return (\n      <span\n        data-slot=\"source-icon-fallback\"\n        className={cn(\n          \"flex size-3 shrink-0 items-center justify-center rounded-sm bg-muted font-medium text-[10px]\",\n          className,\n        )}\n        {...props}\n      >\n        {getDomainInitial(url)}\n      </span>\n    );\n  }\n\n  return (\n    <img\n      data-slot=\"source-icon\"\n      src={`https://www.google.com/s2/favicons?domain=${domain}&sz=32`}\n      alt=\"\"\n      className={cn(\"size-3 shrink-0 rounded-sm\", className)}\n      onError={() => setHasError(true)}\n      {...(props as ComponentProps<\"img\">)}\n    />\n  );\n}\n\nfunction SourceTitle({ className, ...props }: ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"source-title\"\n      className={cn(\"max-w-37.5 truncate\", className)}\n      {...props}\n    />\n  );\n}\n\nexport type SourceProps = Omit<BadgeProps, \"asChild\"> &\n  ComponentProps<\"a\"> & {\n    asChild?: boolean;\n  };\n\nfunction Source({\n  className,\n  variant,\n  size,\n  asChild = false,\n  target = \"_blank\",\n  rel = \"noopener noreferrer\",\n  ...props\n}: SourceProps) {\n  return (\n    <Badge\n      asChild\n      variant={variant}\n      size={size}\n      className={cn(\n        \"cursor-pointer outline-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\",\n        className,\n      )}\n    >\n      <a\n        data-slot=\"source\"\n        target={target}\n        rel={rel}\n        {...(props as ComponentProps<\"a\">)}\n      />\n    </Badge>\n  );\n}\n\nconst SourcesImpl: SourceMessagePartComponent = ({\n  url,\n  title,\n  sourceType,\n}) => {\n  if (sourceType !== \"url\" || !url) return null;\n\n  const domain = extractDomain(url);\n  const displayTitle = title || domain;\n\n  return (\n    <Source href={url}>\n      <SourceIcon url={url} />\n      <SourceTitle>{displayTitle}</SourceTitle>\n    </Source>\n  );\n};\n\nconst Sources = memo(SourcesImpl) as unknown as SourceMessagePartComponent & {\n  Root: typeof Source;\n  Icon: typeof SourceIcon;\n  Title: typeof SourceTitle;\n};\n\nSources.displayName = \"Sources\";\nSources.Root = Source;\nSources.Icon = SourceIcon;\nSources.Title = SourceTitle;\n\nexport {\n  Sources,\n  Source,\n  SourceIcon,\n  SourceTitle,\n  badgeVariants as sourceVariants,\n};\n",
      "type": "registry:component",
      "path": "components/assistant-ui/sources.tsx"
    }
  ],
  "dependencies": [
    "@assistant-ui/react"
  ],
  "registryDependencies": [
    "https://r.assistant-ui.com/badge.json"
  ]
}