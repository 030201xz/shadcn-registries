{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "model-selector",
  "type": "registry:component",
  "files": [
    {
      "content": "\"use client\";\n\nimport { memo, useState, useEffect, createContext, useContext } from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { CheckIcon, ChevronDownIcon } from \"lucide-react\";\nimport { useAssistantApi } from \"@assistant-ui/react\";\nimport { cn } from \"@/lib/utils\";\nimport { Select, SelectContent, SelectValue } from \"@/components/ui/select\";\n\nexport type ModelOption = {\n  id: string;\n  name: string;\n  description?: string;\n  icon?: React.ReactNode;\n  disabled?: boolean;\n};\n\ntype ModelSelectorContextValue = {\n  models: ModelOption[];\n};\n\nconst ModelSelectorContext = createContext<ModelSelectorContextValue | null>(\n  null,\n);\n\nfunction useModelSelectorContext() {\n  const ctx = useContext(ModelSelectorContext);\n  if (!ctx) {\n    throw new Error(\n      \"ModelSelector sub-components must be used within ModelSelector.Root\",\n    );\n  }\n  return ctx;\n}\n\nconst modelSelectorTriggerVariants = cva(\n  \"aui-model-selector-trigger inline-flex w-fit cursor-pointer items-center justify-between gap-2 rounded-md border-0 bg-transparent text-sm shadow-none outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:pointer-events-none disabled:opacity-50 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-secondary text-secondary-foreground hover:bg-secondary/70\",\n        outline:\n          \"border border-input text-muted-foreground hover:bg-accent hover:text-accent-foreground\",\n        ghost:\n          \"text-muted-foreground hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-8 px-3 py-1.5\",\n        sm: \"h-7 px-2 py-1 text-xs\",\n        lg: \"h-9 px-4 py-2\",\n      },\n    },\n    defaultVariants: {\n      variant: \"ghost\",\n      size: \"default\",\n    },\n  },\n);\n\nexport type ModelSelectorRootProps = {\n  models: ModelOption[];\n  value?: string;\n  onValueChange?: (value: string) => void;\n  defaultValue?: string;\n  children: React.ReactNode;\n};\n\nfunction ModelSelectorRoot({\n  models,\n  value,\n  onValueChange,\n  defaultValue,\n  children,\n}: ModelSelectorRootProps) {\n  const selectProps: React.ComponentProps<typeof Select> = {};\n  if (value !== undefined) selectProps.value = value;\n  if (onValueChange) selectProps.onValueChange = onValueChange;\n  const resolvedDefault = defaultValue ?? models[0]?.id;\n  if (resolvedDefault) selectProps.defaultValue = resolvedDefault;\n\n  return (\n    <ModelSelectorContext.Provider value={{ models }}>\n      <Select {...selectProps}>{children}</Select>\n    </ModelSelectorContext.Provider>\n  );\n}\n\nexport type ModelSelectorTriggerProps = React.ComponentProps<\n  typeof SelectPrimitive.Trigger\n> &\n  VariantProps<typeof modelSelectorTriggerVariants>;\n\nfunction ModelSelectorTrigger({\n  className,\n  variant,\n  size,\n  ...props\n}: ModelSelectorTriggerProps) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"model-selector-trigger\"\n      data-variant={variant ?? \"ghost\"}\n      data-size={size ?? \"default\"}\n      className={cn(modelSelectorTriggerVariants({ variant, size }), className)}\n      {...props}\n    >\n      <SelectValue />\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-3.5 opacity-60\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  );\n}\n\nexport type ModelSelectorContentProps = React.ComponentProps<\n  typeof SelectContent\n>;\n\nfunction ModelSelectorContent({\n  className,\n  children,\n  ...props\n}: ModelSelectorContentProps) {\n  const { models } = useModelSelectorContext();\n\n  return (\n    <SelectContent\n      data-slot=\"model-selector-content\"\n      className={cn(\"min-w-[180px]\", className)}\n      {...props}\n    >\n      {children ??\n        models.map((model) => (\n          <ModelSelectorItem\n            key={model.id}\n            model={model}\n            {...(model.disabled ? { disabled: true } : undefined)}\n          />\n        ))}\n    </SelectContent>\n  );\n}\n\nexport type ModelSelectorItemProps = Omit<\n  React.ComponentProps<typeof SelectPrimitive.Item>,\n  \"value\"\n> & {\n  model: ModelOption;\n};\n\nfunction ModelSelectorItem({\n  model,\n  className,\n  ...props\n}: ModelSelectorItemProps) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"model-selector-item\"\n      value={model.id}\n      className={cn(\n        \"relative flex w-full cursor-default select-none items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-40\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-3.5\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>\n        <span className=\"flex items-center gap-2\">\n          {model.icon && (\n            <span className=\"flex size-4 shrink-0 items-center justify-center [&_svg]:size-4\">\n              {model.icon}\n            </span>\n          )}\n          <span className=\"truncate font-medium\">{model.name}</span>\n        </span>\n      </SelectPrimitive.ItemText>\n      {model.description && (\n        <span className=\"truncate text-muted-foreground text-xs\">\n          {model.description}\n        </span>\n      )}\n    </SelectPrimitive.Item>\n  );\n}\n\nexport type ModelSelectorProps = Omit<ModelSelectorRootProps, \"children\"> &\n  VariantProps<typeof modelSelectorTriggerVariants> & {\n    contentClassName?: string;\n  };\n\nconst ModelSelectorImpl = ({\n  models,\n  value: controlledValue,\n  onValueChange: controlledOnValueChange,\n  defaultValue,\n  variant,\n  size,\n  contentClassName,\n}: ModelSelectorProps) => {\n  const [internalValue, setInternalValue] = useState(\n    () => controlledValue ?? defaultValue ?? models[0]?.id ?? \"\",\n  );\n\n  const value = controlledValue ?? internalValue;\n  const onValueChange = controlledOnValueChange ?? setInternalValue;\n\n  const api = useAssistantApi();\n\n  useEffect(() => {\n    const config = { config: { modelName: value } };\n    return api.modelContext().register({\n      getModelContext: () => config,\n    });\n  }, [api, value]);\n\n  return (\n    <ModelSelectorRoot\n      models={models}\n      value={value}\n      onValueChange={onValueChange}\n    >\n      <ModelSelectorTrigger variant={variant} size={size} />\n      <ModelSelectorContent className={contentClassName} />\n    </ModelSelectorRoot>\n  );\n};\n\ntype ModelSelectorComponent = typeof ModelSelectorImpl & {\n  displayName?: string;\n  Root: typeof ModelSelectorRoot;\n  Trigger: typeof ModelSelectorTrigger;\n  Content: typeof ModelSelectorContent;\n  Item: typeof ModelSelectorItem;\n};\n\nconst ModelSelector = memo(\n  ModelSelectorImpl,\n) as unknown as ModelSelectorComponent;\n\nModelSelector.displayName = \"ModelSelector\";\nModelSelector.Root = ModelSelectorRoot;\nModelSelector.Trigger = ModelSelectorTrigger;\nModelSelector.Content = ModelSelectorContent;\nModelSelector.Item = ModelSelectorItem;\n\nexport {\n  ModelSelector,\n  ModelSelectorRoot,\n  ModelSelectorTrigger,\n  ModelSelectorContent,\n  ModelSelectorItem,\n  modelSelectorTriggerVariants,\n};\n",
      "type": "registry:component",
      "path": "components/assistant-ui/model-selector.tsx"
    }
  ],
  "dependencies": [
    "@assistant-ui/react",
    "@radix-ui/react-select",
    "lucide-react",
    "class-variance-authority"
  ],
  "registryDependencies": [
    "select"
  ]
}