{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "model-selector",
  "type": "registry:component",
  "files": [
    {
      "content": "\"use client\";\n\nimport {\n  memo,\n  useState,\n  useEffect,\n  createContext,\n  useContext,\n  type ComponentPropsWithoutRef,\n  type ReactNode,\n} from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { type VariantProps } from \"class-variance-authority\";\nimport { CheckIcon } from \"lucide-react\";\nimport { useAssistantApi } from \"@assistant-ui/react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  SelectRoot,\n  SelectTrigger,\n  SelectContent,\n  SelectItem,\n  selectTriggerVariants,\n} from \"@/components/assistant-ui/select\";\n\nexport type ModelOption = {\n  id: string;\n  name: string;\n  description?: string;\n  icon?: ReactNode;\n  disabled?: boolean;\n};\n\ntype ModelSelectorContextValue = {\n  models: ModelOption[];\n};\n\nconst ModelSelectorContext = createContext<ModelSelectorContextValue | null>(\n  null,\n);\n\nfunction useModelSelectorContext() {\n  const ctx = useContext(ModelSelectorContext);\n  if (!ctx) {\n    throw new Error(\n      \"ModelSelector sub-components must be used within ModelSelector.Root\",\n    );\n  }\n  return ctx;\n}\n\nexport type ModelSelectorRootProps = {\n  models: ModelOption[];\n  value?: string;\n  onValueChange?: (value: string) => void;\n  defaultValue?: string;\n  children: ReactNode;\n};\n\nfunction ModelSelectorRoot({\n  models,\n  value,\n  onValueChange,\n  defaultValue,\n  children,\n}: ModelSelectorRootProps) {\n  const selectProps: ComponentPropsWithoutRef<typeof SelectRoot> = {};\n  if (value !== undefined) selectProps.value = value;\n  if (onValueChange) selectProps.onValueChange = onValueChange;\n  const resolvedDefault = defaultValue ?? models[0]?.id;\n  if (resolvedDefault) selectProps.defaultValue = resolvedDefault;\n\n  return (\n    <ModelSelectorContext.Provider value={{ models }}>\n      <SelectRoot {...selectProps}>{children}</SelectRoot>\n    </ModelSelectorContext.Provider>\n  );\n}\n\nexport type ModelSelectorTriggerProps = ComponentPropsWithoutRef<\n  typeof SelectTrigger\n>;\n\nfunction ModelSelectorTrigger({\n  className,\n  variant,\n  size,\n  children,\n  ...props\n}: ModelSelectorTriggerProps) {\n  return (\n    <SelectTrigger\n      data-slot=\"model-selector-trigger\"\n      variant={variant}\n      size={size}\n      className={cn(\"aui-model-selector-trigger\", className)}\n      {...props}\n    >\n      {children ?? <SelectPrimitive.Value />}\n    </SelectTrigger>\n  );\n}\n\nexport type ModelSelectorContentProps = ComponentPropsWithoutRef<\n  typeof SelectContent\n>;\n\nfunction ModelSelectorContent({\n  className,\n  children,\n  ...props\n}: ModelSelectorContentProps) {\n  const { models } = useModelSelectorContext();\n\n  return (\n    <SelectContent\n      data-slot=\"model-selector-content\"\n      className={cn(\"min-w-[180px]\", className)}\n      {...props}\n    >\n      {children ??\n        models.map((model) => (\n          <ModelSelectorItem\n            key={model.id}\n            model={model}\n            {...(model.disabled ? { disabled: true } : undefined)}\n          />\n        ))}\n    </SelectContent>\n  );\n}\n\nexport type ModelSelectorItemProps = Omit<\n  ComponentPropsWithoutRef<typeof SelectItem>,\n  \"value\" | \"children\"\n> & {\n  model: ModelOption;\n};\n\nfunction ModelSelectorItem({\n  model,\n  className,\n  ...props\n}: ModelSelectorItemProps) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"model-selector-item\"\n      value={model.id}\n      textValue={model.name}\n      className={cn(\n        \"relative flex w-full cursor-default select-none items-center gap-2 rounded-lg py-2 pr-9 pl-3 text-sm outline-none\",\n        \"focus:bg-accent focus:text-accent-foreground\",\n        \"data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-3 flex size-4 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>\n        <span className=\"flex items-center gap-2\">\n          {model.icon && (\n            <span className=\"flex size-4 shrink-0 items-center justify-center [&_svg]:size-4\">\n              {model.icon}\n            </span>\n          )}\n          <span className=\"truncate font-medium\">{model.name}</span>\n        </span>\n      </SelectPrimitive.ItemText>\n      {model.description && (\n        <span className=\"truncate text-muted-foreground text-xs\">\n          {model.description}\n        </span>\n      )}\n    </SelectPrimitive.Item>\n  );\n}\n\nexport type ModelSelectorProps = Omit<ModelSelectorRootProps, \"children\"> &\n  VariantProps<typeof selectTriggerVariants> & {\n    contentClassName?: string;\n  };\n\nconst ModelSelectorImpl = ({\n  models,\n  value: controlledValue,\n  onValueChange: controlledOnValueChange,\n  defaultValue,\n  variant,\n  size,\n  contentClassName,\n}: ModelSelectorProps) => {\n  const [internalValue, setInternalValue] = useState(\n    () => controlledValue ?? defaultValue ?? models[0]?.id ?? \"\",\n  );\n\n  const value = controlledValue ?? internalValue;\n  const onValueChange = controlledOnValueChange ?? setInternalValue;\n\n  const api = useAssistantApi();\n\n  useEffect(() => {\n    const config = { config: { modelName: value } };\n    return api.modelContext().register({\n      getModelContext: () => config,\n    });\n  }, [api, value]);\n\n  return (\n    <ModelSelectorRoot\n      models={models}\n      value={value}\n      onValueChange={onValueChange}\n    >\n      <ModelSelectorTrigger variant={variant} size={size} />\n      <ModelSelectorContent className={contentClassName} />\n    </ModelSelectorRoot>\n  );\n};\n\ntype ModelSelectorComponent = typeof ModelSelectorImpl & {\n  displayName?: string;\n  Root: typeof ModelSelectorRoot;\n  Trigger: typeof ModelSelectorTrigger;\n  Content: typeof ModelSelectorContent;\n  Item: typeof ModelSelectorItem;\n};\n\nconst ModelSelector = memo(\n  ModelSelectorImpl,\n) as unknown as ModelSelectorComponent;\n\nModelSelector.displayName = \"ModelSelector\";\nModelSelector.Root = ModelSelectorRoot;\nModelSelector.Trigger = ModelSelectorTrigger;\nModelSelector.Content = ModelSelectorContent;\nModelSelector.Item = ModelSelectorItem;\n\nexport {\n  ModelSelector,\n  ModelSelectorRoot,\n  ModelSelectorTrigger,\n  ModelSelectorContent,\n  ModelSelectorItem,\n};\n",
      "type": "registry:component",
      "path": "components/assistant-ui/model-selector.tsx"
    }
  ],
  "dependencies": [
    "@assistant-ui/react",
    "@radix-ui/react-select",
    "lucide-react",
    "class-variance-authority"
  ],
  "registryDependencies": [
    "select"
  ]
}